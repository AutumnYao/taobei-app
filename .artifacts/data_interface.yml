# 数据库操作接口库
# 用于定义所有数据库相关的操作接口

- type: Database
  id: DB-FindUserByPhone
  description: 根据手机号查找用户记录，用于验证用户是否已注册。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功查找到用户时返回用户信息。
    - 未找到用户时返回空结果。
    - 手机号格式验证在应用层完成。
  changeLog:
    - date: "2025-01-13"
      description: "初始创建。"

- type: Database
  id: DB-SaveVerificationCode
  description: 在数据库中保存手机号对应的验证码，设置60秒有效期。
  dependencies:
    - none
  acceptanceCriteria:
    - 成功保存验证码和手机号的对应关系。
    - 设置验证码有效期为60秒。
    - 如果同一手机号已有验证码，应覆盖旧的验证码。
  changeLog:
    - date: "2025-01-13"
      description: "初始创建。"

- type: Database
  id: DB-VerifyCode
  description: 验证手机号对应的验证码是否正确且未过期。
  dependencies:
    - none
  acceptanceCriteria:
    - 验证码正确且未过期时返回验证成功。
    - 验证码错误或已过期时返回验证失败。
    - 验证成功后应删除或标记验证码为已使用。
  changeLog:
    - date: "2025-01-13"
      description: "初始创建。"

- type: Database
  id: DB-CreateLoginSession
  description: 创建用户登录会话记录，用于跟踪用户登录状态。
  dependencies:
    - DB-FindUserByPhone
  acceptanceCriteria:
    - 成功创建登录会话记录。
    - 记录包含用户ID、登录时间、会话令牌等信息。
    - 返回会话令牌供前端使用。
  changeLog:
    - date: "2025-01-13"
      description: "初始创建。"